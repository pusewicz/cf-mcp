<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CF::MCP - Cute Framework MCP Server</title>
  <style>
<%= css_content %>
  </style>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <h1>CF::MCP <small style="font-size: 0.5em; color: #8b949e;">v<%= version %></small></h1>
  <p>MCP (Model Context Protocol) server for the <a href="https://github.com/RandyGaul/cute_framework">Cute Framework</a>, a C/C++ 2D game framework.</p>

  <div class="stats">
    <div class="stat">
      <div class="stat-value"><%= stats[:total] %></div>
      <div class="stat-label">Total Items</div>
    </div>
    <div class="stat">
      <div class="stat-value"><%= stats[:functions] %></div>
      <div class="stat-label">Functions</div>
    </div>
    <div class="stat">
      <div class="stat-value"><%= stats[:structs] %></div>
      <div class="stat-label">Structs</div>
    </div>
    <div class="stat">
      <div class="stat-value"><%= stats[:enums] %></div>
      <div class="stat-label">Enums</div>
    </div>
    <div class="stat">
      <div class="stat-value"><%= stats[:topics] %></div>
      <div class="stat-label">Topics</div>
    </div>
  </div>

  <h2>Endpoints</h2>
  <div class="endpoint">
    <div class="endpoint-path">/ or /sse</div>
    <div class="endpoint-desc">Streamable HTTP (stateful) - for Claude Desktop and Claude Code</div>
  </div>
  <div class="endpoint">
    <div class="endpoint-path">/http</div>
    <div class="endpoint-desc">Streamable HTTP (stateless) - for simple integrations</div>
  </div>

  <h2>Claude Desktop Setup</h2>
  <p>Remote MCP servers require a <strong>Pro, Max, Team, or Enterprise</strong> plan.</p>
  <ol>
    <li>Open Claude Desktop</li>
    <li>Go to <strong>Settings &rarr; Connectors</strong></li>
    <li>Add this URL as a remote MCP server:</li>
  </ol>
  <pre><code>https://cf-mcp.fly.dev/</code></pre>

  <h2>Claude Code CLI Setup</h2>
  <pre><code>claude mcp add --transport http cf-mcp https://cf-mcp.fly.dev/http</code></pre>

  <h2>Available Tools</h2>
  <div class="tools">
    <% tools.each do |tool| %>
    <div class="tool">
      <div class="tool-name"><%= h(tool[:name]) %></div>
      <div class="tool-desc"><%= h(tool[:description]) %></div>
    </div>
    <% end %>
  </div>

  <h2>Tool Explorer</h2>
  <div class="explorer">
    <form id="tool-explorer-form" onsubmit="return handleSubmit(event)">
      <div class="form-group">
        <label class="form-label" for="tool-select">Select Tool</label>
        <select id="tool-select" class="form-select" onchange="renderToolForm()">
        </select>
      </div>
      <div id="tool-form"></div>
      <button id="execute-btn" type="submit" class="btn-execute">Execute</button>
    </form>
    <div id="tool-result" class="result-area"></div>
  </div>

  <h2>Topics Explorer</h2>
  <p>Browse tutorial guides and documentation topics for Cute Framework.</p>
  <div class="explorer">
    <div class="form-group">
      <label class="form-label" for="topic-select">Select Topic</label>
      <select id="topic-select" class="form-select" onchange="loadTopic()">
        <option value="">-- Select a topic --</option>
      </select>
    </div>
    <div id="topic-result" class="result-area"></div>
  </div>

  <h2>Links</h2>
  <ul>
    <li><a href="https://github.com/pusewicz/cf-mcp">CF::MCP on GitHub</a></li>
    <li><a href="https://github.com/RandyGaul/cute_framework">Cute Framework</a></li>
    <li><a href="https://modelcontextprotocol.io">Model Context Protocol</a></li>
  </ul>

  <script>
<%= js_content %>
  </script>
</body>
</html>
